---
title: ID 최적화 알고리즘
description: ID 서비스의 ID 최적화 알고리즘에 대해 알아봅니다.
hide: true
hidefromtoc: true
badge: Alpha
source-git-commit: 8f99dc633c87fa36cc0c5413d23b97b4fce7dbc3
workflow-type: tm+mt
source-wordcount: '1319'
ht-degree: 2%

---

# ID 최적화 알고리즘

>[!IMPORTANT]
>
>ID 최적화 알고리즘이 Alpha 중입니다. 기능 및 설명서는 변경될 수 있습니다.

ID 최적화 알고리즘은 ID 그래프가 한 사람을 나타내도록 하는 데 도움이 되는 규칙이며, 따라서 실시간 고객 프로필에서 원치 않는 ID의 병합을 방지합니다.

## 입력 매개 변수

병합된 단일 프로필 및 해당 ID 그래프는 단일 개인(개인 엔티티)을 나타내야 합니다. 일반적으로 단일 개인은 CRM ID 및/또는 로그인 ID로 표시됩니다. 예상하는 것은 두 개인(CRM ID)이 하나의 프로필 또는 그래프로 병합되지 않는다는 것입니다.

ID 최적화 알고리즘을 사용하여 ID 서비스에서 개인 엔티티를 나타내는 네임스페이스를 지정해야 합니다. 예를 들어 CRM 데이터베이스가 단일 CRM ID 및 단일 이메일 주소와 연결할 사용자 계정을 정의하는 경우 이 샌드박스의 ID 설정은 다음과 같습니다.

* CRM ID 네임스페이스 = 고유
* 이메일 네임스페이스 = 고유

고유하게 선언하는 네임스페이스는 지정된 ID 그래프 내에서 최대 한도 1을 갖도록 자동으로 구성됩니다. 예를 들어 CRM ID 네임스페이스를 고유한 것으로 선언하는 경우 ID 그래프는 CRM ID 네임스페이스를 포함하는 ID를 하나만 가질 수 있습니다.

>[!NOTE]
>
>* 현재 이 알고리즘은 단일 로그인 식별자(하나의 로그인 네임스페이스) 사용만 지원합니다. 여러 로그인 식별자(로그인에 사용되는 여러 ID 네임스페이스), 세대 엔티티 그래프 및 계층 그래프 구조는 현재 지원되지 않습니다.
>
>* 개인 식별자이며 샌드박스에서 ID 그래프를 생성하는 데 사용되는 모든 네임스페이스는 고유 네임스페이스로 표시되어야 합니다. 그렇지 않으면 원하지 않는 연결 결과가 표시될 수 있습니다.

## 프로세스

새 ID를 수집할 때 Identity Service는 새 ID와 해당 네임스페이스가 구성된 제한을 초과하는지 확인합니다. 제한을 초과하지 않으면 새 ID의 수집이 진행되고 이러한 ID가 그래프에 연결됩니다. 그러나 제한을 초과하는 경우 ID 최적화 알고리즘은 가장 최근 타임스탬프가 적용되도록 그래프를 업데이트하고 우선 순위가 낮은 네임스페이스의 가장 오래된 링크는 제거됩니다.

## ID 최적화 알고리즘에 대한 예제 시나리오

다음 섹션에서는 공유 디바이스 또는 동일한 타임스탬프를 사용하는 데이터 수집과 같은 시나리오에서 ID 최적화 알고리즘이 작동하는 방식을 간략하게 설명합니다.

### 공유 장치

공유 디바이스는 둘 이상의 개인이 사용하는 디바이스를 의미합니다. 예를 들어, 공유 장치는 파트너 또는 가족 구성원, 라이브러리 컴퓨터 또는 공용 키오스크와 공유하는 랩톱 또는 태블릿일 수 있습니다.

>[!BEGINTABS]

>[!TAB 예 1]

| 네임스페이스 | 제한 |
| --- | --- |
| CRM ID | 1 |
| 이메일 | 1 |
| ECID | N/A |

이 예에서는 CRM ID와 이메일이 모두 고유한 네임스페이스로 지정됩니다. 위치 `timestamp=0`, CRM 레코드 데이터 세트가 수집되고 제한 구성으로 인해 두 개의 다른 그래프를 만듭니다. 각 그래프에는 CRM ID 및 이메일 네임스페이스가 포함되어 있습니다.

* `timestamp=1`: Jane이 노트북을 사용하여 전자 상거래 웹 사이트에 로그인합니다. Jane은 CRM ID와 전자 메일로 나타내고, Jane이 사용하는 랩톱의 웹 브라우저는 ECID로 나타냅니다.
* `timestamp=2`: John이 동일한 노트북을 사용하여 전자 상거래 웹 사이트에 로그인합니다. John은 CRM ID와 이메일로 표시되고, John이 사용한 웹 브라우저는 이미 ECID로 표시됩니다. 동일한 ECID가 두 개의 다른 그래프에 연결되어 있으므로 ID 서비스는 이 장치(랩톱)가 공유 장치임을 알 수 있습니다.
* 그러나 그래프당 최대 하나의 CRM ID 네임스페이스와 하나의 이메일 네임스페이스를 설정하는 제한 구성으로 인해 ID 최적화 알고리즘이 그래프를 두 개로 분할합니다.
   * 마지막으로 John은 인증된 마지막 사용자이므로 노트북을 나타내는 ECID가 Jane이 아닌 자신의 그래프에 연결된 상태로 유지됩니다.

![공유 장치 사례 1](../images/identity-settings/shared-device-case-one.png)

>[!TAB 예제 2]

| 네임스페이스 | 제한 |
| --- | --- |
| CRM ID | 1 |
| ECID | N/A |

이 예에서 CRM ID 네임스페이스는 고유 네임스페이스로 지정됩니다.

* `timestamp=1`: Jane이 노트북을 사용하여 전자 상거래 웹 사이트에 로그인합니다. CRM ID로 표시되고 랩톱의 웹 브라우저는 ECID로 표시됩니다.
* `timestamp=2`: John이 동일한 노트북을 사용하여 전자 상거래 웹 사이트에 로그인합니다. CRM ID로 표시되고 사용하는 웹 브라우저는 동일한 ECID로 표시됩니다.
   * 이 이벤트는 구성된 하나의 CRM ID 제한을 초과하는 두 개의 독립 CRM ID를 동일한 ECID에 연결합니다.
   * 그 결과 ID 최적화 알고리즘이 이전 링크를 제거합니다. 이 경우 이 링크가 연결된 Jane의 CRM ID입니다. `timestamp=1`.
   * 그러나 Jane의 CRM ID는 ID 서비스에 더 이상 그래프로 존재하지 않지만 실시간 고객 프로필에는 프로필로 유지됩니다. ID 그래프는 최소 2개의 연결된 ID를 포함해야 하며 링크가 제거되어 Jane의 CRM ID에 더 이상 연결할 다른 ID가 없기 때문입니다.

![shared-device-case-2](../images/identity-settings/shared-device-case-two.png)

>[!ENDTABS]

### 잘못된 이메일

사용자가 이메일 및/또는 전화번호에 대해 잘못된 값을 입력할 수 있는 경우가 있습니다.

| 네임스페이스 | 제한 |
| --- | --- |
| CRM ID | 1 |
| 이메일 | 1 |
| ECID | N/A |

이 예에서는 CRM ID 및 이메일 네임스페이스가 고유으로 지정됩니다. Jane과 John이 잘못된 이메일 값을 사용하여 전자 상거래 웹 사이트에 등록한 시나리오를 고려하십시오(예: 테스트)<span>@test.com).

* `timestamp=1`: Jane은 iPhone에서 Safari를 사용하여 전자 상거래 웹 사이트에 로그인하여 CRM ID(로그인 정보)와 ECID(브라우저)를 설정합니다.
* `timestamp=2`: John은 자신의 iPhone에서 Google Chrome을 사용하여 전자 상거래 웹 사이트에 로그인하여 자신의 CRM ID(로그인 정보) 및 ECID(브라우저)를 설정합니다.
* `timestamp=3`: 데이터 엔지니어가 Jane의 CRM 레코드를 수집하면 CRM ID가 잘못된 전자 메일에 연결됩니다.
* `timestamp=4`: 데이터 엔지니어가 John의 CRM 레코드를 수집하면 CRM ID가 잘못된 이메일에 연결됩니다.
   * 그러면 두 개의 CRM ID 네임스페이스가 있는 단일 그래프를 만들기 때문에 구성된 제한을 위반하게 됩니다.
   * 그 결과, ID 최적화 알고리즘이 이전 링크를 삭제합니다. 이 경우 CRM ID 네임스페이스가 있는 Jane의 ID와 테스트가 있는 ID 간의 링크입니다<span>@test.

ID 최적화 알고리즘을 사용하면 잘못된 이메일 또는 전화번호와 같은 잘못된 ID 값이 여러 다른 ID 그래프에 전파되지 않습니다.

![불량 이메일](../images/identity-settings/bad-email.png)

### 익명 이벤트 연결

ECID는 인증되지 않은(익명) 이벤트를 저장하는 반면 CRM ID는 인증된 이벤트를 저장합니다. 공유 장치의 경우 ECID(인증되지 않은 이벤트의 전달자)가 **마지막 인증된 사용자**.

익명 이벤트 연결의 작동 방식을 더 잘 이해하려면 아래 다이어그램을 보십시오.

* 케빈과 노라가 한 알씩 나눠 먹는다.
   * `timestamp=1`: Kevin이 자신의 계정을 사용하여 전자 상거래 웹 사이트에 로그인함으로써 CRM ID(로그인 정보)와 ECID(브라우저)를 설정합니다. 이제 로그인 시 Kevin은 마지막으로 인증된 사용자로 간주됩니다.
   * `timestamp=2`: Nora는 계정을 사용하여 전자 상거래 웹 사이트에 로그인하여 CRM ID(로그인 정보) 및 동일한 ECID를 설정합니다. 로그인 시 Nora는 이제 마지막으로 인증된 사용자로 간주됩니다.
   * `timestamp=3`: Kevin은 태블릿을 사용하여 전자 상거래 웹 사이트를 탐색하지만 자신의 계정으로 로그인하지 않습니다. 그런 다음 Kevin의 검색 활동은 ECID에 저장되며, 이는 Nora가 마지막으로 인증된 사용자이기 때문에 Nora와 연결됩니다. 이 시점에서 노라는 익명의 사건을 소유한다.
      * Kevin이 다시 로그인할 때까지 Nora의 병합된 프로필은 ECID에 대해 저장된 인증되지 않은 모든 이벤트와 연결됩니다(이벤트는 ECID가 기본 ID인 경우).
   * `timestamp=4`: Kevin이 다시 로그인합니다. 이 시점에서 다시 한 번 마지막으로 인증된 사용자가 되며 이제 인증되지 않은 이벤트도 소유합니다.
      * 다음 시간 이전에 초기 로그인 `timestamp=1`; 및
      * 케빈의 첫 번째 로그인과 두 번째 로그인 사이에 익명으로 탐색하는 동안 그와 노라가 했던 모든 활동.

![anon-event-association](../images/identity-settings/anon-event-association.png)


## 다음 단계

ID 그래프 연결 규칙에 대한 자세한 내용은 다음 설명서를 참조하십시오.

* [ID 그래프 연결 규칙 개요](./overview.md)
* [ID 그래프 연결 규칙을 구성하기 위한 예제 시나리오](./example-scenarios.md)
* [ID 연결 논리](./identity-linking-logic.md)
* [ID 서비스 및 실시간 고객 프로필](identity-and-profile.md)
